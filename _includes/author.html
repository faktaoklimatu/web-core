{%- assign author = include.author %}
{%- if author.id or author.ids %}
  {%- if author.show_internal_affiliation %}
    {%- assign affiliation = site.title %}
  {%- else %}
    {%- assign affiliation = nil %}
  {%- endif %}

  {%- assign ids = author.ids | join: "," | default: author.id %}
  {%- assign ids_list = ids | split: "," %}

  {%- for id in ids_list %}
    {%- assign found=false %}
    {%- for group in site.data.organization-members %}
      {%- assign member = group.members | find: "id",id %}
      {%- if member %}<span class="name"><a href="{{ '/o-nas#' | append: member.id }}">{{ member.name_formal | default: member.name }}</a></span>{%- assign found=true %}{%- endif %}
    {%- endfor %}
    {%- unless found %}
    <div class="build-error">Author {{ id }} is not present in organization members</div>
    {%- endunless %}
  {%- endfor %}
{%- else %}
  {%- assign affiliation = author.affiliation %}
  {%- if author.link %}
    <span class="name"><a href="{{ author.link }}" class="no-ext-link-icon">{{ author.name }}</a></span>
  {%- else %}
    <span class="name">{{ author.name }}</span>
  {%- endif %}
{%- endif %}
{%- if affiliation %}<span class="affiliation">{{ affiliation }}</span>{%- endif %}
